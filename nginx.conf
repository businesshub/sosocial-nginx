#upstream nodeapp {
#    server 10.132.75.153:3001;
#}

# NGINX Server Instance
#server {
#    listen 80;
#    server_name localhost;

    # Proxy to the Node instance
#    location / {
#      proxy_set_header X-Real-IP $remote_addr;
#      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#      proxy_set_header Host $http_host;
#      proxy_set_header X-NginX-Proxy true;
#      proxy_pass http://nodeapp;
#      proxy_redirect off;
#    }
# }

 # -------------------------------------------------------------------
 #                         Nginx configuraiton
 # -------------------------------------------------------------------

 worker_processes    1;

 error_log		stderr	info;
 pid             /var/run/nginx.pid;

 events {
     use	epoll;
 }

 http {

     include     /etc/nginx/mime.types;

     upstream app_proxy {
         server localhost:3001;		# nodejs server
     }

     server {

         listen          80 deferred;
         server_name     $hostname;

         location / {
             proxy_pass       http://app_proxy/;
         }
     }
 }

# https://github.com/misho-kr/docker-appliances/blob/master/nginx-nodejs/Dockerfile
# http://blog.donaldderek.com/2013/08/cf-i-configure-your-staging-machine-with-node-js-and-nginx/
# https://registry.hub.docker.com/_/nginx/
# http://www.sitepoint.com/configuring-nginx-ssl-node-js/